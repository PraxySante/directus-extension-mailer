"use strict";module.exports=(e,{services:s,exceptions:t,env:n})=>{const{MailService:c}=s;e.post("/",(async(e,s,t)=>{const o=new c({schema:t});if(!(null!=n.EMAIL_ALLOW_GUEST_SEND&&n.EMAIL_ALLOW_GUEST_SEND||null!=e.accountability.user&&null!=e.accountability.role))return s.status(400).send({message:"User not authorized, enable guest sending or include a token"});if(e.body)try{const t=await o.send(e.body);return console.log(t),s.send({status:"success"})}catch(e){return s.send({status:e})}}))};
